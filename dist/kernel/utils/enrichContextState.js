import e from'./../../ext/@babel/runtime/helpers/esm/defineProperty.js';function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(r){for(var n=1;n<arguments.length;n++){var s=null!=arguments[n]?arguments[n]:{};n%2?t(Object(s),!0).forEach((function(t){e(r,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):t(Object(s)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(s,e))}))}return r}var n="_FULFILLED",s="_REJECTED";function c(e,t,c){var o=c.requestStatus,a=e.operation||e.request||o,i=Date.now();a&&function(e,t){var c=t.type,o=r(r({},t),{},{createdAt:Date.now()});e.pendingRequestsReference||(e.pendingRequestsReference=[]);var a=function(t){var r=e.pendingRequestsReference.findIndex((function(e){return e.type===t}));e.pendingRequestsReference.splice(r,1)};switch(t.requestResolved){case!0:a(c.replace(n,""));break;case!1:a(c.replace(s,""));break;default:e.pendingRequestsReference.push(o)}}(t,c);var f=a&&{lastRequest:r(r({},c),{},{createdAt:i,requestResolved:c.requestResolved})},u=r(r({},c),{},{createdAt:i,hasRequest:a||!1}),p={lastChangeDate:i,id:Math.random()};if(t){if(t.lastActionsReference&&t.lastActionsReference.length){var l=t.lastActionsReference.length>40;t.lastActionsReference.push(u),l&&t.lastActionsReference.shift()}else t.lastActionsReference=[u]}return r(r({},t),{},{lastAction:u,lastActionsReferenceLastChange:p},f)}export{c as enrichContextState};
