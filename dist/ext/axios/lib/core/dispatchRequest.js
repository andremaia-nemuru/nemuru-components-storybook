import e from"../utils.js";import a from"./transformData.js";import r from"../cancel/isCancel.js";import t from"../defaults/index.js";import s from"../cancel/Cancel.js";function n(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s("canceled")}var o=function(s){return n(s),s.headers=s.headers||{},s.data=a.call(s,s.data,s.headers,s.transformRequest),s.headers=e.merge(s.headers.common||{},s.headers[s.method]||{},s.headers),e.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete s.headers[e]})),(s.adapter||t.adapter)(s).then((function(e){return n(s),e.data=a.call(s,e.data,e.headers,s.transformResponse),e}),(function(e){return r(e)||(n(s),e&&e.response&&(e.response.data=a.call(s,e.response.data,e.response.headers,s.transformResponse))),Promise.reject(e)}))};export{o as default};
